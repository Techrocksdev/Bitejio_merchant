import{R as j,r as c,u as g,f as v,j as e,L as y,h as w,s as d}from"./index-8kXOQ8MA.js";import{u as C,C as L,F as S}from"./index-B-HnDY6i.js";import{P as $}from"./style-iAHlTFgA.js";import{S as q,H as E}from"./header-Bd8wBNxd.js";function A(){const{register:m,handleSubmit:h,control:u,formState:{errors:s},setValue:n}=C({mode:"onChange"}),[t,o]=c.useState(!1),{profile:a,refetch:p,isSidebarHidden:N}=g(),x=v();c.useEffect(()=>{if(a?.firstName&&(n("firstName",a?.firstName),n("lastName",a?.lastName),n("userName",a?.name),n("shopName",a?.shopName),n("address",a?.address),n("email",a?.email),a?.phoneNumber)){const r=a?.phoneNumber.replace(/^\+/,""),l=`${a?.countryCode}`;n("phoneNumber",{phoneNumber:r,countryCode:l})}},[a]);const f=async r=>{o(!0),r.countryCode=r.phoneNumber.countryCode,r.phoneNumber=r.phoneNumber.phoneNumber;try{const l=await w(a._id,r);l.error?d(l.message,"error"):(d(l.message,"success"),await p())}catch{console.log("An error occurred")}finally{o(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"admin-wrapper d-flex",children:[e.jsx(q,{}),e.jsxs("div",{className:N?"main-content flex-grow-1 full":"main-content flex-grow-1",id:"main-content",children:[e.jsx(E,{}),e.jsx("main",{className:"p-4",children:e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsxs("div",{className:"d-flex gap-3 align-items-center justify-content-between",children:[e.jsx("h3",{className:"fw-semibold fs-5",children:" Edit Profile"}),e.jsxs(y,{to:"",onClick:()=>x(-1),className:"btn btn-sm btn-light",children:[e.jsx("i",{className:"fa fa-arrow-left me-2"})," Go Back"]})]})}),e.jsx("div",{className:"card-body",children:e.jsxs("form",{onSubmit:h(f),children:[e.jsxs("div",{className:"modal-body row g-3",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["First Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.firstName?"input-error":""}`,placeholder:"Enter first name",...m("firstName",{required:"First name is required",minLength:{value:2,message:"First name must be at least 2 characters"},maxLength:{value:50,message:"First name must be less than 50 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"First name can only contain letters and spaces"}})}),s.firstName&&e.jsx("p",{className:"form-error",children:s.firstName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Last Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.lastName?"input-error":""}`,placeholder:"Enter last name",...m("lastName",{required:"Last name is required",minLength:{value:2,message:"Last name must be at least 2 characters"},maxLength:{value:50,message:"Last name must be less than 50 characters"},pattern:{value:/^[A-Za-z\s]+$/,message:"Last name can only contain letters and spaces"}})}),s.lastName&&e.jsx("p",{className:"form-error",children:s.lastName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Username ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.userName?"input-error":""}`,placeholder:"Enter username",...m("userName",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"},maxLength:{value:30,message:"Username must be less than 30 characters"}})}),s.userName&&e.jsx("p",{className:"form-error",children:s.userName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Email ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"email",className:`form-control ${s.email?"input-error":""}`,placeholder:"Enter email address",...m("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),disabled:!0}),s.email&&e.jsx("p",{className:"form-error",children:s.email.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Shop Name ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.shopName?"input-error":""}`,placeholder:"Enter shop name",...m("shopName",{required:"Shop name is required",minLength:{value:2,message:"Shop name must be at least 2 characters"},maxLength:{value:100,message:"Shop name must be less than 100 characters"}})}),s.shopName&&e.jsx("p",{className:"form-error",children:s.shopName.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Phone Number ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx(L,{className:`form-control ${s.phoneNumber?"input-error":""}`,name:"phoneNumber",control:u,rules:{required:"Phone number is required"},render:({field:r})=>e.jsx($,{country:"in",inputClass:`form-control ${s.phoneNumber?"input-error":""}`,inputStyle:{padding:"unset",paddingLeft:"48px"},value:r?.value?.phoneNumber?`${r?.value?.countryCode}${r?.value?.phoneNumber}`:"",onChange:(l,i)=>{const b=l.slice(i.dialCode.length);r.onChange({phoneNumber:b,countryCode:`+${i.dialCode}`})}})}),s.phoneNumber&&e.jsx("p",{className:"form-error",children:s.phoneNumber.message})]}),e.jsxs("div",{className:"col-md-6",children:[e.jsxs("label",{className:"form-label fw-semibold",children:["Address ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",className:`form-control ${s.address?"input-error":""}`,placeholder:"Enter address",...m("address",{required:"Address is required"})}),s.address&&e.jsx("p",{className:"form-error",children:s.address.message})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"submit",className:"btn comman-btn-main",disabled:t,children:t?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Saving..."}),e.jsx(S,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Save"})})]})})]})})]})]})})}const Z=j.memo(A);export{Z as default};
