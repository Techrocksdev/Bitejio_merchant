import{r as f,j as t,R as b,q as j,b as I,p as w,s as g,t as E}from"./index-84b59UUZ.js";import{u as N,F as T}from"./index-CoYDS6PA.js";const B=({seconds:s=30,minutes:m=0,onResendClick:n,resendButtonText:u="Resend OTP",text:d="Time Left",style:p={},buttonStyle:h={}})=>{const[o,l]=f.useState(m*60+s),[a,x]=f.useState(!0);f.useEffect(()=>{let e;return a&&o>0?e=setInterval(()=>{l(o-1)},1e3):o===0&&x(!1),()=>clearInterval(e)},[a,o]);const c=async()=>{n&&await n()!==!1&&(l(m*60+s),x(!0))},y=()=>{const e=Math.floor(o/60),r=o%60;return`${e}:${r<10?"0":""}${r}`};return t.jsx("div",{style:p,children:a?t.jsxs("span",{children:[d," ",y()]}):t.jsx("button",{onClick:c,style:{background:"none",border:"none",color:"#e46a15",fontWeight:600,fontSize:"16px",cursor:"pointer",...h},children:u})})};function L(){const{register:s,handleSubmit:m,formState:{errors:n}}=N({mode:"onChange"}),[u,d]=f.useState(!1),p=j(),h=I(),l=new URLSearchParams(p.search).get("email"),a=l?atob(l):null,x=async e=>{d(!0);let r=Object.values(e);r=r.join("");const v={email:a,otp:r};try{const i=await E(v);i.error?g(i.message,"error"):(p?.state?.type?localStorage.setItem("token-bit-merchant",i.results.token):h(`/reset-password?email=${btoa(a)}`),g(i.message,"success"))}catch{console.log("An error occurred")}finally{d(!1)}},c=(e,r,v,i)=>{e.keyCode!==9&&(e.key==="ArrowLeft"||e.key==="Backspace"?i?.focus():r?.value?.length>=r.maxLength&&v?.focus())},y=async()=>{const e={email:a};try{const r=await w(e);r.error?g(r.message,"error"):g(`Your OTP is: ${r.results.otp}`,"success")}catch{console.log("An error occurred")}};return t.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:t.jsxs("div",{className:"card shadow p-4 border-0 login-card",children:[t.jsx("h3",{className:"text-center mb-3 text-main fw-bold",children:"Verify OTP"}),t.jsx("p",{className:"text-center text mb-4",children:"Enter the 6-digit OTP sent to your email."}),t.jsxs("form",{onSubmit:m(x),className:"text-center",children:[t.jsxs("div",{className:"d-flex justify-content-center mb-4",children:[t.jsx("input",{type:"number",maxLength:1,className:`form-control text-center mx-1 ${n.otp1?"input-error":""}`,style:{width:"50px",height:"50px"},...s("otp1",{required:!0}),onKeyUp:e=>{c(e,document.getElementById("otp1"),document.getElementById("otp2"))},onInput:e=>{e.target.value.length>1&&(e.target.value=e.target.value.slice(0,1))},id:"otp1"}),t.jsx("input",{type:"number",maxLength:1,className:`form-control text-center mx-1 ${n.otp2?"input-error":""}`,style:{width:"50px",height:"50px"},...s("otp2",{required:!0}),onKeyUp:e=>{c(e,document.getElementById("otp2"),document.getElementById("otp3"),document.getElementById("otp1"))},onInput:e=>{e.target.value.length>1&&(e.target.value=e.target.value.slice(0,1))},id:"otp2"}),t.jsx("input",{type:"number",maxLength:1,className:`form-control text-center mx-1 ${n.otp3?"input-error":""}`,style:{width:"50px",height:"50px"},...s("otp3",{required:!0}),onKeyUp:e=>{c(e,document.getElementById("otp3"),document.getElementById("otp4"),document.getElementById("otp2"))},onInput:e=>{e.target.value.length>1&&(e.target.value=e.target.value.slice(0,1))},id:"otp3"}),t.jsx("input",{type:"number",maxLength:1,className:`form-control text-center mx-1 ${n.otp4?"input-error":""}`,style:{width:"50px",height:"50px"},...s("otp4",{required:!0}),onKeyUp:e=>{c(e,document.getElementById("otp4"),document.getElementById("otp5"),document.getElementById("otp3"))},onInput:e=>{e.target.value.length>1&&(e.target.value=e.target.value.slice(0,1))},id:"otp4"})]}),t.jsx("div",{className:"mt-3 mb-3 text",children:t.jsx(B,{seconds:30,onResendClick:y,resendButtonText:"Resend OTP",text:"Time Left: ",style:{fontSize:"14px",textAlign:"center"}})}),t.jsx("button",{type:"submit",className:"btn w-100 comman-btn-main ",disabled:u,children:u?t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"me-2",children:"Verifying..."}),t.jsx(T,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Verify OTP"})]})]})})}const k=b.memo(L);export{k as default};
