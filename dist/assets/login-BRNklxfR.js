import{R as x,r as l,f,u as p,j as e,D as j,s as n}from"./index-D3T7aQCD.js";import{u as w,F as N}from"./index-CsDELSGv.js";function v(){const{register:c,handleSubmit:d,formState:{errors:s}}=w({mode:"onChange"}),[t,h]=l.useState(!1),[i,m]=l.useState(!1),o=f(),{refetch:u}=p();l.useEffect(()=>{localStorage.getItem("token-bit-merchant")&&localStorage.getItem("rememberMe-bit-merchant")&&o("/merchant/dashboard")},[o]);const b=()=>h(!t),g=async a=>{m(!0),a.fcmToken=localStorage.getItem("fcmTokenBit"),a.deviceId=localStorage.getItem("uid-bit-merchant"),a.deviceOS="web";try{const r=await j(a);r.error?n(r.message,"error"):(localStorage.setItem("token-bit-merchant",r.results.token),n(r.message,"success"),o("/merchant/dashboard"),u())}catch{console.log("An error occurred")}finally{m(!1)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"overflow-x-hidden d-flex align-items-center justify-content-center vh-100",children:e.jsxs("div",{className:"card shadow p-4 border-0 login-card",children:[e.jsx("div",{className:"login-img",children:e.jsx("img",{src:"/assets/image/project/logo-main.svg",className:"w-100 h-100 object-fit-contain",alt:""})}),e.jsx("h3",{className:"text-center mb-4 text-main fw-bold",children:"Welcome Back"}),e.jsxs("form",{onSubmit:d(g),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"text",className:`form-control ${s.email?"input-error":""}`,placeholder:"Enter your email",...c("email",{required:"Email is required",pattern:{value:/^(?!.*\.\.)[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Enter a valid email address"}})}),s.email&&e.jsx("p",{className:"form-error",children:s.email.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label",children:"Password"}),e.jsxs("div",{className:"position-relative",children:[e.jsx("input",{type:t?"text":"password",className:`form-control pe-5 ${s.password?"input-error":""}`,placeholder:"Enter your password",...c("password",{required:"Password is required",pattern:{value:/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#^])[A-Za-z\d@$!%*?&#^]{8,}$/,message:"Password must be 8+ characters with uppercase, number and special character"}})}),e.jsx("i",{className:`fa pass-eye ${t?"fa-eye-slash":"fa-eye"}`,onClick:b})]}),s.password&&e.jsx("p",{className:"form-error",children:s.password.message})]}),e.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:e.jsxs("div",{className:"form-check",children:[e.jsx("input",{type:"checkbox",className:"form-check-input",id:"rememberMe",onChange:a=>localStorage.setItem("rememberMe-bit-merchant",a.target.checked)}),e.jsx("label",{className:"form-check-label text",htmlFor:"rememberMe",children:"Remember me"})]})}),e.jsx("button",{type:"submit",className:"btn w-100 comman-btn-main",disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"Wait..."}),e.jsx(N,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Login"})]})]})})})}const S=x.memo(v);export{S as default};
