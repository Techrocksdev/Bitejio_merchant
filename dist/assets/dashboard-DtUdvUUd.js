import{R as b,u as f,a as g,h as o,j as s,D as p,s as v,E as w,F as D}from"./index-DYxjhy-z.js";import{S as y,H as O}from"./sideBar-CGS_U8K8.js";import{S as d}from"./skeleton-B6kIi0WM.js";import{h}from"./moment-BLMuvzoS.js";function C(){const{isSidebarHidden:m}=f(),[a,t]=g.useState({}),{data:l}=o({queryKey:["getDashboardCount"],queryFn:w,onError:e=>{console.log(e)},select:e=>e.results.data}),{data:x,isLoading:j,refetch:u}=o({queryKey:["ordersList"],queryFn:async()=>D({page:1,pageSize:5,search:"",userId:"",year:0,month:0,startDate:"",endDate:""}),onError:e=>{console.log(e)}}),i=x?.results?.orders||[],N=async(e,r)=>{const c={orderId:e,status:r};try{const n=await p(c);n.error?v(n.message,"error"):u()}catch{console.log("An error occurred")}};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"admin-wrapper d-flex",children:[s.jsx(y,{}),s.jsxs("div",{className:m?"main-content flex-grow-1 full":"main-content flex-grow-1",id:"main-content",children:[s.jsx(O,{}),s.jsxs("main",{className:"p-4",children:[s.jsxs("div",{className:"row mb-4 g-3",children:[s.jsx("div",{className:"col-md-3 col-sm-6",children:s.jsxs("div",{className:"card stat-card shadow-sm p-3 d-flex flex-row align-items-center",children:[s.jsx("div",{className:"icon-circle bg-light-main text-main me-3",children:s.jsx("i",{className:"fa-solid fa-box"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("h6",{className:"fw-semibold text-muted mb-1",children:"Total Orders"}),s.jsx("h4",{className:"fw-bold text-dark mb-0",children:l?.orderCount||0})]})]})}),s.jsx("div",{className:"col-md-3 col-sm-6",children:s.jsxs("div",{className:"card stat-card shadow-sm p-3 d-flex flex-row align-items-center",children:[s.jsx("div",{className:"icon-circle me-3",children:s.jsx("i",{className:"fa-solid fa-hourglass-half"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("h6",{className:"fw-semibold text-muted mb-1",children:"Pending Orders"}),s.jsx("h4",{className:"fw-bold text-dark mb-0",children:l?.pendingOrderCount||0})]})]})}),s.jsx("div",{className:"col-md-3 col-sm-6",children:s.jsxs("div",{className:"card stat-card shadow-sm p-3 d-flex flex-row align-items-center",children:[s.jsx("div",{className:"icon-circle me-3",children:s.jsx("i",{className:"fa-solid fa-truck"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("h6",{className:"fw-semibold text-muted mb-1",children:"Delivered Orders"}),s.jsx("h4",{className:"fw-bold text-dark mb-0",children:l?.deliveredOrderCount||0})]})]})}),s.jsx("div",{className:"col-md-3 col-sm-6",children:s.jsxs("div",{className:"card stat-card shadow-sm p-3 d-flex flex-row align-items-center",children:[s.jsx("div",{className:"icon-circle me-3",children:s.jsx("i",{className:"fa-solid fa-indian-rupee-sign"})}),s.jsxs("div",{className:"text-start",children:[s.jsx("h6",{className:"fw-semibold text-muted mb-1",children:"Total Revenue"}),s.jsxs("h4",{className:"fw-bold text-dark mb-0",children:[" ","₹",l?.revenue||0]})]})]})})]}),s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("div",{className:"d-flex gap-3 align-items-center justify-content-between",children:s.jsx("h3",{className:"fw-semibold fs-5",children:"Recent Orders"})})}),s.jsx("div",{className:"table-responsive shadow-sm rounded bg-white p-3",children:s.jsxs("table",{className:"table table-hover align-middle",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"S.No"}),s.jsx("th",{children:"Order ID"}),s.jsx("th",{children:"Customer"}),s.jsx("th",{children:"Items"}),s.jsx("th",{children:"Total"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Date"}),s.jsx("th",{className:"text-center",children:"Actions"})]})}),s.jsx("tbody",{children:j?[...Array(5)].map((e,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})}),s.jsx("td",{children:s.jsx(d,{})})]},r)):i?.length?i?.map((e,r)=>s.jsxs("tr",{children:[s.jsx("td",{children:r+1}),s.jsxs("td",{children:["#",e.orderId]}),s.jsx("td",{children:e.userId.firstName}),s.jsx("td",{children:"2x Pizza, 1x Coke"}),s.jsxs("td",{children:["₹",e.amount]}),s.jsx("td",{children:s.jsxs("select",{value:e.status,className:"form-select form-select-sm status-dropdown",onChange:c=>N(e._id,c.target.value),children:[s.jsx("option",{value:"Pending",children:"Pending"}),s.jsx("option",{value:"Preparing",selected:!0,children:"Preparing"}),s.jsx("option",{value:"Out for Delivery",children:"Out for Delivery"}),s.jsx("option",{value:"Delivered",children:"Delivered"}),s.jsx("option",{value:"Cancelled",children:"Cancelled"})]})}),s.jsx("td",{children:h(e.createdAt).format("DD MMM YYYY, hh:mm A")}),s.jsx("td",{className:"text-center",children:s.jsx("button",{className:"table-btn bg-main me-2","data-bs-toggle":"modal","data-bs-target":"#viewOrderModal",onClick:()=>t(e),children:s.jsx("i",{className:"fa fa-eye"})})})]},e._id)):s.jsx("tr",{children:s.jsx("td",{colSpan:"8",className:"text-center",children:"Oops! No Result Found."})})})]})})]})})})]})]})]}),s.jsx("div",{className:"modal fade",id:"viewOrderModal",tabIndex:-1,"aria-hidden":"true","data-bs-backdrop":"static",children:s.jsx("div",{className:"modal-dialog modal-dialog-centered modal-lg",children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h5",{className:"modal-title text-main fw-bold",children:"Order Details"}),s.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal",onClick:()=>t({})})]}),s.jsx("div",{className:"modal-body",children:s.jsxs("div",{className:"row g-4",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{className:"fw-bold text-main mb-2",children:"Customer Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Name:"})," ",a?.userId?.firstName," ",a?.userId?.lastName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Email:"})," ",a?.userId?.email]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Phone:"})," ",a?.userId?.phoneNumber]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Address:"})," ",a?.address?.address_line2," ",a?.address?.address_line1]})]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{className:"fw-bold text-main mb-2",children:"Merchant Details"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Shop:"})," ",a?.merchant?.shopName]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Contact:"})," ",a?.merchant?.phoneNumber]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Location:"})," ",a?.merchant?.address]})]}),s.jsxs("div",{className:"col-12",children:[s.jsx("h6",{className:"fw-bold text-main mb-2",children:"Order Information"}),s.jsxs("p",{children:[s.jsx("strong",{children:"Order ID:"})," #",a?.orderId]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Items:"})," 2x Pizza, 1x Coke"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Total Amount:"})," ₹",a?.amount]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Payment Method:"})," UPI"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Status:"})," ",a?.status]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Placed At:"})," ",h(a.createdAt).format("DD MMM YYYY, hh:mm A")]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Expected Delivery:"})," 1 hour"]})]})]})}),s.jsx("div",{className:"modal-footer",children:s.jsx("button",{className:"btn comman-btn-main",onClick:()=>t({}),"data-bs-dismiss":"modal",children:"Close"})})]})})})]})}const P=b.memo(C);export{P as default};
