import{R as P,r as o,a as b,b as j,j as s}from"./index-vfcVhafR.js";import{u as N,F as v,r as g,s as l}from"./index-DJt1s4Hj.js";function y(){const{register:t,handleSubmit:d,formState:{errors:e},watch:m}=N({mode:"onChange"}),[w,S]=o.useState(!1),[h,C]=o.useState(!1),[n,i]=o.useState(!1),u=b(),p=j(),c=new URLSearchParams(p.search).get("email"),f=c?atob(c):null,x=async r=>{i(!0),r.email=f;try{const a=await g(r);a.error?l(a.message,"error"):(localStorage.removeItem("token-bit-merchant"),u("/login"),l(a.message,"success"))}catch{console.log("An error occurred")}finally{i(!1)}};return s.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:s.jsxs("div",{className:"card shadow p-4 border-0 login-card",children:[s.jsx("h3",{className:"text-center mb-3 text-main fw-bold",children:"Reset Password"}),s.jsx("p",{className:"text-center text mb-4",children:"Enter your new password."}),s.jsxs("form",{onSubmit:d(x),children:[s.jsxs("div",{className:"mb-3 position-relative",children:[s.jsx("label",{className:"form-label",children:"New Password"}),s.jsx("div",{className:"position-relative",children:s.jsx("input",{type:w?"text":"password",className:`form-control pe-5 ${e.newPassword?"input-error":""}`,placeholder:"Enter your new password",...t("newPassword",{required:"New Password is required",pattern:{value:/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#^])[A-Za-z\d@$!%*?&#^]{8,}$/,message:"Password must be 8+ characters with uppercase, number and special character"}})})}),e.newPassword&&s.jsx("p",{className:"form-error",children:e.newPassword.message})]}),s.jsxs("div",{className:"mb-3 position-relative",children:[s.jsx("label",{className:"form-label",children:"Confirm Password"}),s.jsx("div",{className:"position-relative",children:s.jsx("input",{type:h?"text":"password",className:`form-control pe-5 ${e.confirmPassword?"input-error":""}`,placeholder:"Confirm your new password",...t("confirmPassword",{required:"Confirm Password is required",validate:r=>r===m("newPassword")||"Passwords do not match"})})}),e.confirmPassword&&s.jsx("p",{className:"form-error",children:e.confirmPassword.message})]}),s.jsx("button",{type:"submit",className:"btn w-100 comman-btn-main",disabled:n,children:n?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"me-2",children:"Wait..."}),s.jsx(v,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Update Password"})]})]})})}const E=P.memo(y);export{E as default};
