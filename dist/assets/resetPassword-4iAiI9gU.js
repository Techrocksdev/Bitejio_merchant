import{R as C,a as o,b as S,A as $,j as s,C as q,s as h}from"./index-DYxjhy-z.js";import{u as E,F as R}from"./index-AvaQJQlq.js";function k(){const{register:c,handleSubmit:p,trigger:l,formState:{errors:e},watch:t}=E({mode:"onChange"}),[n,P]=o.useState(!1),[i,x]=o.useState(!1),[d,m]=o.useState(!1),b=S(),j=$(),w=new URLSearchParams(j.search).get("email"),g=w?atob(w):null,f=t("newPassword"),u=t("confirmPassword");o.useEffect(()=>{u&&f&&l("confirmPassword")},[f,u,l]);const N=()=>P(!n),y=()=>x(!i),v=async a=>{m(!0),a.email=g;try{const r=await q(a);r.error?h(r.message,"error"):(localStorage.removeItem("token-bit-merchant"),b("/login"),h(r.message,"success"))}catch{console.log("An error occurred")}finally{m(!1)}};return s.jsx("div",{className:"d-flex align-items-center justify-content-center vh-100",children:s.jsxs("div",{className:"card shadow p-4 border-0 login-card",children:[s.jsx("h3",{className:"text-center mb-3 text-main fw-bold",children:"Reset Password"}),s.jsx("p",{className:"text-center text mb-4",children:"Enter your new password."}),s.jsxs("form",{onSubmit:p(v),children:[s.jsxs("div",{className:"mb-3 position-relative",children:[s.jsx("label",{className:"form-label",children:"New Password"}),s.jsxs("div",{className:"position-relative",children:[s.jsx("input",{type:n?"text":"password",className:`form-control pe-5 ${e.newPassword?"input-error":""}`,placeholder:"Enter your new password",...c("newPassword",{required:"New Password is required",pattern:{value:/^(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#^])[A-Za-z\d@$!%*?&#^]{8,}$/,message:"Password must be 8+ characters with uppercase, number and special character"}})}),s.jsx("i",{className:`fa pass-eye ${n?"fa-eye-slash":"fa-eye"}`,onClick:N})]}),e.newPassword&&s.jsx("p",{className:"form-error",children:e.newPassword.message})]}),s.jsxs("div",{className:"mb-3 position-relative",children:[s.jsx("label",{className:"form-label",children:"Confirm Password"}),s.jsxs("div",{className:"position-relative",children:[s.jsx("input",{type:i?"text":"password",className:`form-control pe-5 ${e.confirmPassword?"input-error":""}`,placeholder:"Confirm your new password",...c("confirmPassword",{required:"Confirm Password is required",validate:a=>a===t("newPassword")||"Passwords do not match"})}),s.jsx("i",{className:`fa pass-eye ${i?"fa-eye-slash":"fa-eye"}`,onClick:y})]}),e.confirmPassword&&s.jsx("p",{className:"form-error",children:e.confirmPassword.message})]}),s.jsx("button",{type:"submit",className:"btn w-100 comman-btn-main",disabled:d,children:d?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"me-2",children:"Wait..."}),s.jsx(R,{strokeColor:"white",strokeWidth:"5",animationDuration:"0.75",width:"20",visible:!0})]}):"Update Password"})]})]})})}const L=C.memo(k);export{L as default};
